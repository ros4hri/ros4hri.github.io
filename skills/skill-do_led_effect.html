

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Skill do_led_effect &mdash; ROS4HRI: ROS for Human-Robot Interaction 0.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/tabs.css?v=a5c4661c" />
      <link rel="stylesheet" type="text/css" href="../_static/style/main.css?v=8e287a83" />

  
    <link rel="shortcut icon" href="../_static/icon.png"/>
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=2709fde1"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script async="async" data-goatcounter="https://ros4hri.goatcounter.com/count" src="https://gc.zgo.at/count.js"></script>
      <script src="../_static/tabs.js?v=3030b3cb"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Skill look_for_human" href="skill-look_for_human.html" />
    <link rel="prev" title="Skill ask_human_for_help" href="skill-ask_human_for_help.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            ROS4HRI: ROS for Human-Robot Interaction
              <img src="../_static/logo_small.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../overview.html">The ROS4HRI Ecosystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../standard.html">The ROS4HRI Standard</a></li>
<li class="toctree-l1"><a class="reference internal" href="../packages.html">Open-source ROS4HRI packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html">ROS4HRI Standard Skills</a></li>
<li class="toctree-l1"><a class="reference internal" href="../references.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../robots.html">Compatible Robots</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about.html">Who is behind ROS4HRI?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">ROS4HRI: ROS for Human-Robot Interaction</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">ROS4HRI Standard Skills</a></li>
      <li class="breadcrumb-item active">Skill <code class="docutils literal notranslate"><span class="pre">do_led_effect</span></code></li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/skills/skill-do_led_effect.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="skill-do-led-effect">
<span id="index-0"></span><span id="id1"></span><h1>Skill <code class="docutils literal notranslate"><span class="pre">do_led_effect</span></code><a class="headerlink" href="#skill-do-led-effect" title="Link to this heading"></a></h1>
<ul class="simple">
<li><p><strong>Version</strong>: 1.0.0</p></li>
<li><p><strong>Default path</strong>: <code class="docutils literal notranslate"><span class="pre">/skill/do_led_effect</span></code></p></li>
<li><p><strong>Datatype</strong>: <a class="ros-interface ros-action reference internal" href="../interfaces/interaction_skills/DoLedEffect.html#interaction-skills-action-doledeffect"><span class="std std-ref">interaction_skills/action/DoLedEffect</span></a></p></li>
<li><p><strong>Definition source</strong>: <code class="docutils literal notranslate"><span class="pre">package.xml</span></code> in <a class="reference external" href="https://github.com/ros4hri/interaction_skills">ros4hri/interaction_skills</a></p></li>
</ul>
<p>Perform light effects using the robot’s LEDs.</p>
<section id="input-parameters">
<h2>Input parameters<a class="headerlink" href="#input-parameters" title="Link to this heading"></a></h2>
<ul>
<li><p><strong>groups</strong> <code class="docutils literal notranslate"><span class="pre">string</span> <span class="pre">array</span></code>, default: <code class="docutils literal notranslate"><span class="pre">[]</span></code></p>
<p>The LED groups to use for the effect (eg <code class="docutils literal notranslate"><span class="pre">ear_leds</span></code>, <code class="docutils literal notranslate"><span class="pre">back_leds</span></code>).
An empty list means the effect is applied to all LED groups.</p>
</li>
<li><p><strong>effect</strong> <code class="docutils literal notranslate"><span class="pre">string</span></code>, default: <code class="docutils literal notranslate"><span class="pre">solid_color</span></code></p>
<p>The selected LED effect, one of:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">solid_color</span></code>:
Applies up to two solid colors side-by-side to the specified LED groups,
with the primary color applied to the first partition of the LED group,
and the secondary color applied to the second partition.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rainbow</span></code>:
Lights the LED groups in a rainbow effect,
which moves through the LED group cyclically.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">fade</span></code>:
Fades between two colors cyclically.
It starts with the primary color,
fades to the secondary color over the first partition,
then fades back to the primary color over the second partition.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">blink</span></code>:
Blinks the LED groups between two colors.
It applies a solid primary color in the first partition of a cycle,
then applies a solid secondary color in the second partition.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">flow</span></code>:
Displays a loading-like effect, with the partition ratio of LEDs colored
with the primary color moving through the LED group,
at a constant speed such to traverse the entire LED group in one cycle,
and the secondary color filling the rest of the LED group.</p></li>
</ul>
</li>
<li><p><strong>duration</strong> <code class="docutils literal notranslate"><span class="pre">float</span></code>, default: <code class="docutils literal notranslate"><span class="pre">0.0</span></code></p>
<p>Total duration of the effect before the action is completed.
A null or negative number will mean the action continues indefinitely until
canceled.</p>
</li>
<li><p><strong>color</strong> <a class="ros-interface ros-msg reference internal" href="../interfaces/interaction_skills/LedColor.html#interaction-skills-msg-ledcolor"><span class="std std-ref">interaction_skills/msg/LedColor</span></a></p>
<p>The primary color for the effect.
Ignored for the <code class="docutils literal notranslate"><span class="pre">rainbow</span></code> effect.</p>
</li>
<li><p><strong>secondary_color</strong> <a class="ros-interface ros-msg reference internal" href="../interfaces/interaction_skills/LedColor.html#interaction-skills-msg-ledcolor"><span class="std std-ref">interaction_skills/msg/LedColor</span></a></p>
<p>The secondary color for the effect.
Ignored for the <code class="docutils literal notranslate"><span class="pre">rainbow</span></code> effect.</p>
</li>
<li><p><strong>cycle</strong> <code class="docutils literal notranslate"><span class="pre">float</span></code>, default: <code class="docutils literal notranslate"><span class="pre">1.0</span></code></p>
<p>Duration in seconds of a single cycle of the effect.
Ignored for the <code class="docutils literal notranslate"><span class="pre">solid_color</span></code> effect.</p>
</li>
<li><p><strong>partition</strong> <code class="docutils literal notranslate"><span class="pre">float</span></code>, default: <code class="docutils literal notranslate"><span class="pre">1.0</span></code></p>
<p>For effects with two phases in a cycle
(or two spatially separated partitions as in <code class="docutils literal notranslate"><span class="pre">solid_color</span></code>),
the proportion of the first one ([0., 1.])
Ignored for the <code class="docutils literal notranslate"><span class="pre">rainbow</span></code> effect.</p>
</li>
</ul>
</section>
<section id="quick-snippets">
<h2>Quick snippets<a class="headerlink" href="#quick-snippets" title="Link to this heading"></a></h2>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-0-0-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-0-0-0" name="0-0" role="tab" tabindex="0">Command-line</button><button aria-controls="panel-0-0-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-0-0-1" name="0-1" role="tab" tabindex="-1">ROS 2 action (Python)</button><button aria-controls="panel-0-0-2" aria-selected="false" class="sphinx-tabs-tab" id="tab-0-0-2" name="0-2" role="tab" tabindex="-1">ROS 2 action (C++)</button><button aria-controls="panel-0-0-3" aria-selected="false" class="sphinx-tabs-tab" id="tab-0-0-3" name="0-3" role="tab" tabindex="-1">QML</button></div><div aria-labelledby="tab-0-0-0" class="sphinx-tabs-panel" id="panel-0-0-0" name="0-0" role="tabpanel" tabindex="0"><p>Call the skill from the command-line</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>ros2<span class="w"> </span>action<span class="w"> </span>send_goal<span class="w"> </span>/skill/do_led_effect<span class="w"> </span>interaction_skills/action/DoLedEffect<span class="w"> </span><span class="c1"># then press Tab to complete the message prototype</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-0-0-1" class="sphinx-tabs-panel" hidden="true" id="panel-0-0-1" name="0-1" role="tabpanel" tabindex="0"><p>Call the action from a Python script:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python</span>

<span class="kn">import</span> <span class="nn">rclpy</span>
<span class="kn">from</span> <span class="nn">rclpy.action</span> <span class="kn">import</span> <span class="n">ActionClient</span>
<span class="kn">from</span> <span class="nn">rclpy.node</span> <span class="kn">import</span> <span class="n">Node</span>

<span class="kn">from</span> <span class="nn">interaction_skills.action</span> <span class="kn">import</span>

<span class="k">class</span> <span class="nc">DoledeffectActionClient</span><span class="p">(</span><span class="n">Node</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s1">&#39;do_led_effect_client&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_action_client</span> <span class="o">=</span> <span class="n">ActionClient</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="p">,</span> <span class="s1">&#39;/skill/do_led_effect&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">send_goal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
        <span class="n">goal_msg</span> <span class="o">=</span> <span class="o">.</span><span class="n">Goal</span><span class="p">()</span>

        <span class="c1"># TODO: adapt to the action&#39;s parameters</span>

        <span class="c1"># check the DoLedEffectGoal message</span>
        <span class="c1"># definition for the possible goal parameters</span>

        <span class="c1"># goal_msg.a = a</span>
        <span class="c1"># goal_msg.b = b</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_action_client</span><span class="o">.</span><span class="n">wait_for_server</span><span class="p">()</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_action_client</span><span class="o">.</span><span class="n">send_goal_async</span><span class="p">(</span><span class="n">goal_msg</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">rclpy</span><span class="o">.</span><span class="n">init</span><span class="p">(</span><span class="n">args</span><span class="o">=</span><span class="n">args</span><span class="p">)</span>

    <span class="n">action_client</span> <span class="o">=</span> <span class="n">ActionClient</span><span class="p">()</span>

    <span class="c1"># TODO: adapt to your action&#39;s parameters</span>
    <span class="n">future</span> <span class="o">=</span> <span class="n">action_client</span><span class="o">.</span><span class="n">send_goal</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>

    <span class="n">rclpy</span><span class="o">.</span><span class="n">spin_until_future_complete</span><span class="p">(</span><span class="n">action_client</span><span class="p">,</span> <span class="n">future</span><span class="p">)</span>

    <span class="n">rclpy</span><span class="o">.</span><span class="n">shutdown</span><span class="p">()</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-0-0-2" class="sphinx-tabs-panel" hidden="true" id="panel-0-0-2" name="0-2" role="tabpanel" tabindex="0"><p>Call the action from a C++ program:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;functional&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;future&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;memory&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;string&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sstream&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;chrono&gt;</span>

<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;interaction_skills/action/.hpp&quot;</span>

<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;rclcpp/rclcpp.hpp&quot;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;rclcpp_action/rclcpp_hpp&quot;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;rclcpp_components/register_node_macro.hpp&quot;</span>

<span class="k">using</span><span class="w"> </span><span class="k">namespace</span><span class="w"> </span><span class="nn">std</span><span class="o">::</span><span class="nn">chrono_literals</span><span class="p">;</span>
<span class="k">using</span><span class="w"> </span><span class="k">namespace</span><span class="w"> </span><span class="nn">std</span><span class="p">;</span>

<span class="k">class</span><span class="w"> </span><span class="nc">DoledeffectActionClient</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="n">rclcpp</span><span class="o">::</span><span class="n">Node</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
<span class="w">  </span><span class="k">using</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="n">interaction_skills</span><span class="o">::</span><span class="n">action</span><span class="o">::</span><span class="p">;</span>
<span class="w">  </span><span class="k">using</span><span class="w"> </span><span class="n">GoalHandle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rclcpp_action</span><span class="o">::</span><span class="n">ClientGoalHandle</span><span class="o">&lt;&gt;</span><span class="p">;</span>

<span class="w">  </span><span class="k">explicit</span><span class="w"> </span><span class="n">DoledeffectActionClient</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">rclcpp</span><span class="o">::</span><span class="n">NodeOptions</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">options</span><span class="p">)</span>
<span class="w">  </span><span class="o">:</span><span class="w"> </span><span class="n">Node</span><span class="p">(</span><span class="s">&quot;do_led_effect_action_client&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">options</span><span class="p">)</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="k">this</span><span class="o">-&gt;</span><span class="n">client_ptr_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rclcpp_action</span><span class="o">::</span><span class="n">create_client</span><span class="o">&lt;&gt;</span><span class="p">(</span>
<span class="w">            </span><span class="k">this</span><span class="p">,</span>
<span class="w">            </span><span class="s">&quot;&quot;</span><span class="p">);</span>

<span class="w">    </span><span class="k">this</span><span class="o">-&gt;</span><span class="n">timer_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="o">-&gt;</span><span class="n">create_wall_timer</span><span class="p">(</span>
<span class="w">            </span><span class="mi">500</span><span class="n">ms</span><span class="p">,</span>
<span class="w">            </span><span class="n">bind</span><span class="p">(</span><span class="o">&amp;</span><span class="n">DoledeffectActionClient</span><span class="o">::</span><span class="n">send_goal</span><span class="p">,</span><span class="w"> </span><span class="k">this</span><span class="p">));</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="kt">void</span><span class="w"> </span><span class="n">send_goal</span><span class="p">()</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="k">using</span><span class="w"> </span><span class="k">namespace</span><span class="w"> </span><span class="nn">std</span><span class="o">::</span><span class="nn">placeholders</span><span class="p">;</span>

<span class="w">    </span><span class="k">this</span><span class="o">-&gt;</span><span class="n">timer_</span><span class="o">-&gt;</span><span class="n">cancel</span><span class="p">();</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="o">-&gt;</span><span class="n">client_ptr_</span><span class="o">-&gt;</span><span class="n">wait_for_action_server</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="n">RCLCPP_ERROR</span><span class="p">(</span><span class="k">this</span><span class="o">-&gt;</span><span class="n">get_logger</span><span class="p">(),</span><span class="w"> </span><span class="s">&quot;Action server not available after waiting&quot;</span><span class="p">);</span>
<span class="w">      </span><span class="n">rclcpp</span><span class="o">::</span><span class="n">shutdown</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">goal_msg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">::</span><span class="n">Goal</span><span class="p">();</span>


<span class="w">    </span><span class="c1">// check the DoLedEffectGoal message</span>
<span class="w">    </span><span class="c1">// definition for the possible goal parameters</span>

<span class="w">    </span><span class="c1">// goal_msg.... = ...;</span>

<span class="w">    </span><span class="n">RCLCPP_INFO</span><span class="p">(</span><span class="k">this</span><span class="o">-&gt;</span><span class="n">get_logger</span><span class="p">(),</span><span class="w"> </span><span class="s">&quot;Sending goal&quot;</span><span class="p">);</span>

<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">send_goal_options</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rclcpp_action</span><span class="o">::</span><span class="n">Client</span><span class="o">&lt;&gt;::</span><span class="n">SendGoalOptions</span><span class="p">();</span>

<span class="w">    </span><span class="n">send_goal_options</span><span class="p">.</span><span class="n">goal_response_callback</span><span class="w"> </span><span class="o">=</span>
<span class="w">        </span><span class="n">bind</span><span class="p">(</span><span class="o">&amp;</span><span class="n">DoledeffectActionClient</span><span class="o">::</span><span class="n">goal_response_callback</span><span class="p">,</span><span class="w"> </span><span class="k">this</span><span class="p">,</span><span class="w"> </span><span class="n">_1</span><span class="p">);</span>

<span class="w">    </span><span class="n">send_goal_options</span><span class="p">.</span><span class="n">feedback_callback</span><span class="w"> </span><span class="o">=</span>
<span class="w">        </span><span class="n">bind</span><span class="p">(</span><span class="o">&amp;</span><span class="n">DoledeffectActionClient</span><span class="o">::</span><span class="n">feedback_callback</span><span class="p">,</span><span class="w"> </span><span class="k">this</span><span class="p">,</span><span class="w"> </span><span class="n">_1</span><span class="p">,</span><span class="w"> </span><span class="n">_2</span><span class="p">);</span>

<span class="w">    </span><span class="n">send_goal_options</span><span class="p">.</span><span class="n">result_callback</span><span class="w"> </span><span class="o">=</span>
<span class="w">        </span><span class="n">bind</span><span class="p">(</span><span class="o">&amp;</span><span class="n">DoledeffectActionClient</span><span class="o">::</span><span class="n">result_callback</span><span class="p">,</span><span class="w"> </span><span class="k">this</span><span class="p">,</span><span class="w"> </span><span class="n">_1</span><span class="p">);</span>


<span class="w">    </span><span class="k">this</span><span class="o">-&gt;</span><span class="n">client_ptr_</span><span class="o">-&gt;</span><span class="n">async_send_goal</span><span class="p">(</span><span class="n">goal_msg</span><span class="p">,</span><span class="w"> </span><span class="n">send_goal_options</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>

<span class="k">private</span><span class="o">:</span>
<span class="w">  </span><span class="n">rclcpp_action</span><span class="o">::</span><span class="n">Client</span><span class="o">&lt;&gt;::</span><span class="n">SharedPtr</span><span class="w"> </span><span class="n">client_ptr_</span><span class="p">;</span>
<span class="w">  </span><span class="n">rclcpp</span><span class="o">::</span><span class="n">TimerBase</span><span class="o">::</span><span class="n">SharedPtr</span><span class="w"> </span><span class="n">timer_</span><span class="p">;</span>

<span class="w">  </span><span class="kt">void</span><span class="w"> </span><span class="nf">goal_response_callback</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">GoalHandle</span><span class="o">::</span><span class="n">SharedPtr</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">goal_handle</span><span class="p">)</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">goal_handle</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="n">RCLCPP_ERROR</span><span class="p">(</span><span class="k">this</span><span class="o">-&gt;</span><span class="n">get_logger</span><span class="p">(),</span><span class="w"> </span><span class="s">&quot;Goal was rejected by server&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="n">RCLCPP_INFO</span><span class="p">(</span><span class="k">this</span><span class="o">-&gt;</span><span class="n">get_logger</span><span class="p">(),</span><span class="w"> </span><span class="s">&quot;Goal accepted by server, waiting for result&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="kt">void</span><span class="w"> </span><span class="nf">feedback_callback</span><span class="p">(</span>
<span class="w">      </span><span class="n">GoalHandle</span><span class="o">::</span><span class="n">SharedPtr</span><span class="p">,</span>
<span class="w">      </span><span class="k">const</span><span class="w"> </span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="k">const</span><span class="w"> </span><span class="o">::</span><span class="n">Feedback</span><span class="o">&gt;</span><span class="w"> </span><span class="n">feedback</span><span class="p">)</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="n">stringstream</span><span class="w"> </span><span class="n">ss</span><span class="p">;</span>
<span class="w">    </span><span class="n">ss</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Next number in sequence received: &quot;</span><span class="p">;</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="k">auto</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">feedback</span><span class="o">-&gt;</span><span class="n">partial_sequence</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="n">ss</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot; &quot;</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="n">RCLCPP_INFO</span><span class="p">(</span><span class="k">this</span><span class="o">-&gt;</span><span class="n">get_logger</span><span class="p">(),</span><span class="w"> </span><span class="n">ss</span><span class="p">.</span><span class="n">str</span><span class="p">().</span><span class="n">c_str</span><span class="p">());</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="kt">void</span><span class="w"> </span><span class="nf">result_callback</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">GoalHandle</span><span class="o">::</span><span class="n">WrappedResult</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">result</span><span class="p">)</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="n">code</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">case</span><span class="w"> </span><span class="no">rclcpp_action</span><span class="o">::</span><span class="no">ResultCode</span><span class="o">::</span><span class="no">SUCCEEDED</span><span class="p">:</span>
<span class="w">          </span><span class="k">break</span><span class="p">;</span>
<span class="w">      </span><span class="k">case</span><span class="w"> </span><span class="no">rclcpp_action</span><span class="o">::</span><span class="no">ResultCode</span><span class="o">::</span><span class="no">ABORTED</span><span class="p">:</span>
<span class="w">          </span><span class="n">RCLCPP_ERROR</span><span class="p">(</span><span class="k">this</span><span class="o">-&gt;</span><span class="n">get_logger</span><span class="p">(),</span><span class="w"> </span><span class="s">&quot;Goal was aborted&quot;</span><span class="p">);</span>
<span class="w">          </span><span class="k">return</span><span class="p">;</span>
<span class="w">      </span><span class="k">case</span><span class="w"> </span><span class="no">rclcpp_action</span><span class="o">::</span><span class="no">ResultCode</span><span class="o">::</span><span class="no">CANCELED</span><span class="p">:</span>
<span class="w">          </span><span class="n">RCLCPP_ERROR</span><span class="p">(</span><span class="k">this</span><span class="o">-&gt;</span><span class="n">get_logger</span><span class="p">(),</span><span class="w"> </span><span class="s">&quot;Goal was canceled&quot;</span><span class="p">);</span>
<span class="w">          </span><span class="k">return</span><span class="p">;</span>
<span class="w">      </span><span class="k">default</span><span class="o">:</span>
<span class="w">          </span><span class="n">RCLCPP_ERROR</span><span class="p">(</span><span class="k">this</span><span class="o">-&gt;</span><span class="n">get_logger</span><span class="p">(),</span><span class="w"> </span><span class="s">&quot;Unknown result code&quot;</span><span class="p">);</span>
<span class="w">          </span><span class="k">return</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="n">stringstream</span><span class="w"> </span><span class="n">ss</span><span class="p">;</span>
<span class="w">    </span><span class="n">ss</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Result received: &quot;</span><span class="p">;</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="k">auto</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">result</span><span class="p">.</span><span class="n">result</span><span class="o">-&gt;</span><span class="n">sequence</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="n">ss</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot; &quot;</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="n">RCLCPP_INFO</span><span class="p">(</span><span class="k">this</span><span class="o">-&gt;</span><span class="n">get_logger</span><span class="p">(),</span><span class="w"> </span><span class="n">ss</span><span class="p">.</span><span class="n">str</span><span class="p">().</span><span class="n">c_str</span><span class="p">());</span>
<span class="w">    </span><span class="n">rclcpp</span><span class="o">::</span><span class="n">shutdown</span><span class="p">();</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">};</span><span class="w">  </span><span class="c1">// class DoledeffectActionClient</span>


<span class="n">RCLCPP_COMPONENTS_REGISTER_NODE</span><span class="p">(</span><span class="n">DoledeffectActionClient</span><span class="p">)</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-0-0-3" class="sphinx-tabs-panel" hidden="true" id="panel-0-0-3" name="0-3" role="tabpanel" tabindex="0"><p>You can call this skill from QML using the following code snippet. See <span class="xref std std-ref">ros_qml_plugin</span> to learn more.</p>
<div class="highlight-qml notranslate"><div class="highlight"><pre><span></span><span class="kr">import</span> <span class="nx">Ros</span> <span class="mf">2.0</span>

<span class="c1">// ...</span>
<span class="nx">DoLedEffectSkill</span> <span class="p">{</span>
    <span class="kd">id: mySkill</span>

    <span class="k">onResult:</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Skill result: &quot;</span> <span class="o">+</span> <span class="nx">result</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">onFeedback:</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Skill feedback: &quot;</span> <span class="o">+</span> <span class="nx">feedback</span><span class="p">);</span>
    <span class="p">}</span>

<span class="p">}</span>

<span class="c1">// Call the skill</span>
<span class="nx">mySkill</span><span class="p">.</span><span class="nx">do_led_effect</span><span class="p">();</span>
</pre></div>
</div>
</div></div>
</section>
<section id="see-also">
<h2>See also<a class="headerlink" href="#see-also" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>List of other <a class="reference internal" href="index.html#interaction-skills"><span class="std std-ref">Interaction</span></a> skills</p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="skill-ask_human_for_help.html" class="btn btn-neutral float-left" title="Skill ask_human_for_help" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="skill-look_for_human.html" class="btn btn-neutral float-right" title="Skill look_for_human" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright PAL Robotics S.L..</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>  

<style>
  /* Sidebar header (and topbar for mobile) */
  .wy-side-nav-search,
  .wy-nav-top {
    background: #464646;
  }

  .wy-nav-content {
    max-width: none;
  }

  /* Sidebar */
  .wy-nav-side {
    background: #136264;
  }
</style>


</body>
</html>